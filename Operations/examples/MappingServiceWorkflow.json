{
  "type": "workflow",
  "title": "Map with mapping service",
  "description": "This is a basic",
  "createdAt": "20231115Z1800",
  "provenance": [
    {
      "type": "orcid",
      "url": "https://orcid.org/0009-0005-2800-4833"
    },
    {
      "type": "plain",
      "name": "Nicolas BlumenrÃ¶hr",
      "email": "nicolas.blumenroehr@kit.edu"
    }
  ],
  "inputTypes": [
    {
      "key": "PID -> MPSSchema",
      "internal_reference": "mpsSchema"
    },
    {
      "key": "PID -> MPSPlugin",
      "internal_reference": "mpsPlugin"
    },
    {
      "key": "PID -> URL",
      "internal_reference": "documentURL"
    }
  ],
  "outputTypes": {
    "type": "PID -> JSONDocument",
    "result_internal_reference": "mappedDocument"
  },
  "requiredAttributes": [],
  "execution": [
    {
      "title": "Download files",
      "mode": "async",
      "steps": [
        {
          "operation": "PID -> Download file",
          "url": "mpsSchema",
          "result_internal_reference": "schema"
        },
        {
          "operation": "PID -> Download file",
          "url": "mpsPlugin",
          "result_internal_reference": "plugin"
        },
        {
          "operation": "PID -> Download file",
          "url": "documentURL",
          "result_internal_reference": "document"
        }
      ]
    },
    {
      "title": "Start mapping service",
      "mode": "sync",
      "operation": "PID -> DockerMappingService",
      "attributes": [
        {
          "key": "plugins",
          "value": [
            "plugin"
          ]
        }
      ],
      "result_internal_reference": "mpsURL"
    },
    {
      "title": "Upload schema to Mapping-Service",
      "mode": "sync",
      "operationTypeProfile": "PID -> HTTP",
      "attributes": [
        {
          "key": "url",
          "value": "mpsURL"
        },
        {
          "key": "method",
          "value": "PID -> HTTPMethod.POST"
        },
        {
          "key": "payload",
          "value": "schema"
        }
      ],
      "result_internal_reference": "schemaID"
    },
    {
      "title": "Map document",
      "mode": "sync",
      "operationTypeProfile": "PID -> HTTP",
      "attributes": [
        {
          "key": "url",
          "value": "${{mpsURL}}/mappingExec/${{schemaID}}"
        },
        {
          "key": "method",
          "value": "PID -> HTTPMethod.POST"
        },
        {
          "key": "payload",
          "value": "document"
        }
      ],
      "result_internal_reference": "mappedDocument"
    }
  ]
}